@startuml Detection Workflow
!theme plain
skinparam backgroundColor #FFFFFF

start

:Initialize Camera;
:Load AI Models;

while (System Running?) is (Yes)
    :Capture Frame (640x640);
    :Detect Vehicles;
    
    if (Vehicle Detected?) then (Yes)
        :Save Vehicle Image;
        :Detect License Plates\nin Vehicle Areas;
        
        if (License Plate Detected?) then (Yes)
            :Filter Valid Plates\n(Min 256x128);
            
            if (Valid Plates Found?) then (Yes)
                :Draw Bounding Boxes;
                :Save Image with Boxes;
                :Crop License Plate;
                
                if (Plate Size >= 256x128?) then (Yes)
                    :Resize to 256x128;
                else (No)
                    :Skip OCR;
                    stop
                endif
                
                :Hailo OCR Processing;
                
                if (OCR Successful?) then (Yes)
                    :Save Result;
                else (No)
                    :EasyOCR Processing;
                    
                    if (EasyOCR Successful?) then (Yes)
                        :Save Result;
                    else (No)
                        :Log No Text Found;
                    endif
                endif
                
                :Save to Database;
            else (No)
                :Save Vehicle Detection Only;
            endif
        else (No)
            :Save Vehicle Detection Only;
        endif
    else (No)
        :Continue to Next Frame;
    endif
    
    :Wait for Next Frame;
endwhile (No)

stop

@enduml 