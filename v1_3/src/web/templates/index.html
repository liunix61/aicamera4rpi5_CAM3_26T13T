<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }} - AI Camera v1.3</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 80px 0;
        }
        
        .feature-card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .status-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        
        .status-online { background-color: #28a745; }
        .status-offline { background-color: #dc3545; }
        .status-warning { background-color: #ffc107; }
        
        .quick-action-btn {
            padding: 15px 25px;
            border-radius: 10px;
            text-decoration: none;
            display: inline-block;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .quick-action-btn:hover {
            transform: translateY(-2px);
            text-decoration: none;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
            <a class="navbar-brand" href="/">
                <i class="fas fa-camera"></i> AI Camera v1.3
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="/"><i class="fas fa-home"></i> Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/camera"><i class="fas fa-video"></i> Camera</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/health"><i class="fas fa-heartbeat"></i> Health</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container text-center">
            <h1 class="display-4 mb-4">
                <i class="fas fa-camera"></i> AI Camera System
            </h1>
            <p class="lead mb-4">
                Advanced camera management system with real-time video streaming, 
                AI detection capabilities, and comprehensive monitoring.
            </p>
            <div class="mt-4">
                <a href="/camera" class="btn btn-light btn-lg me-3">
                    <i class="fas fa-video"></i> Camera Dashboard
                </a>
                <a href="/health" class="btn btn-outline-light btn-lg">
                    <i class="fas fa-heartbeat"></i> System Health
                </a>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container my-5">
        <!-- System Status -->
        <div class="row mb-5">
            <div class="col-12">
                <h2 class="mb-4">
                    <i class="fas fa-info-circle"></i> System Status
                </h2>
        </div>

            <div class="col-md-3">
                <div class="status-card text-center">
                    <i class="fas fa-camera feature-icon text-primary"></i>
                    <h5>Camera Status</h5>
                    <span id="camera-status" class="status-indicator status-offline"></span>
                    <span id="camera-status-text">Offline</span>
                </div>
        </div>

            <div class="col-md-3">
                <div class="status-card text-center">
                    <i class="fas fa-brain feature-icon text-success"></i>
                    <h5>AI Detection</h5>
                    <span id="detection-status" class="status-indicator status-offline"></span>
                    <span id="detection-status-text">Inactive</span>
        </div>
    </div>

            <div class="col-md-3">
                <div class="status-card text-center">
                    <i class="fas fa-server feature-icon text-info"></i>
                    <h5>System Health</h5>
                    <span id="system-status" class="status-indicator status-online"></span>
                    <span id="system-status-text">Healthy</span>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="status-card text-center">
                    <i class="fas fa-database feature-icon text-warning"></i>
                    <h5>Database</h5>
                    <span id="database-status" class="status-indicator status-online"></span>
                    <span id="database-status-text">Connected</span>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="row mb-5">
            <div class="col-12">
                <h2 class="mb-4">
                    <i class="fas fa-bolt"></i> Quick Actions
                </h2>
            </div>
            
            <div class="col-12 text-center">
                <a href="/camera" class="quick-action-btn btn btn-primary">
                    <i class="fas fa-video"></i><br>
                    <strong>Camera Control</strong><br>
                    <small>Start/Stop streaming, adjust settings</small>
                </a>
                
                <a href="/camera/capture" class="quick-action-btn btn btn-success">
                    <i class="fas fa-camera"></i><br>
                    <strong>Capture Image</strong><br>
                    <small>Take a photo</small>
                </a>
                
                <a href="/health" class="quick-action-btn btn btn-info">
                    <i class="fas fa-heartbeat"></i><br>
                    <strong>System Health</strong><br>
                    <small>Monitor system status</small>
                </a>
                
                <a href="/detection" class="quick-action-btn btn btn-warning">
                    <i class="fas fa-brain"></i><br>
                    <strong>AI Detection</strong><br>
                    <small>Configure AI models</small>
                </a>
            </div>
        </div>

        <!-- Features -->
        <div class="row">
            <div class="col-12">
                <h2 class="mb-4">
                    <i class="fas fa-star"></i> System Features
                </h2>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-video feature-icon text-primary"></i>
                        <h5 class="card-title">Real-time Video Streaming</h5>
                        <p class="card-text">
                            High-quality video streaming with configurable resolution, 
                            frame rate, and camera settings. Support for both main and 
                            low-resolution streams.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-brain feature-icon text-success"></i>
                        <h5 class="card-title">AI Detection Pipeline</h5>
                        <p class="card-text">
                            Advanced AI detection capabilities using Hailo AI models. 
                            Support for vehicle detection, license plate recognition, 
                            and custom object detection.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-cogs feature-icon text-info"></i>
                        <h5 class="card-title">Advanced Configuration</h5>
                        <p class="card-text">
                            Comprehensive camera configuration including exposure, 
                            white balance, focus controls, and image processing parameters.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-chart-line feature-icon text-warning"></i>
                        <h5 class="card-title">System Monitoring</h5>
                        <p class="card-text">
                            Real-time system health monitoring with performance metrics, 
                            error tracking, and automated health checks.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-database feature-icon text-danger"></i>
                        <h5 class="card-title">Data Management</h5>
                        <p class="card-text">
                            Efficient data storage and management for captured images, 
                            detection results, and system logs.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="card-body text-center">
                        <i class="fas fa-network-wired feature-icon text-secondary"></i>
                        <h5 class="card-title">WebSocket Communication</h5>
                        <p class="card-text">
                            Real-time bidirectional communication for instant updates, 
                            remote control, and live status monitoring.
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Information -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">
                            <i class="fas fa-info-circle"></i> System Information
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Camera Information</h6>
                                <ul class="list-unstyled">
                                    <li><strong>Model:</strong> <span id="camera-model">Loading...</span></li>
                                    <li><strong>Resolution:</strong> <span id="camera-resolution">Loading...</span></li>
                                    <li><strong>Frame Rate:</strong> <span id="camera-fps">Loading...</span></li>
                                    <li><strong>Status:</strong> <span id="camera-detail-status">Loading...</span></li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>System Information</h6>
                                <ul class="list-unstyled">
                                    <li><strong>Version:</strong> AI Camera v1.3</li>
                                    <li><strong>Architecture:</strong> Dependency Injection + Flask Blueprints</li>
                                    <li><strong>Camera Library:</strong> Picamera2</li>
                                    <li><strong>AI Framework:</strong> Hailo AI</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center">
            <p class="mb-0">
                <i class="fas fa-camera"></i> AI Camera v1.3 - Advanced Camera Management System
            </p>
            <small class="text-muted">
                Built with Flask, Picamera2, and Hailo AI
            </small>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Update system status based on camera status
        function updateSystemStatus() {
            // This would typically fetch status from the server
            // For now, we'll simulate some status updates
            
            // Simulate camera status check
            fetch('/camera/status')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        const status = data.status;
                        
                        // Update camera status
                        const cameraStatus = document.getElementById('camera-status');
                        const cameraStatusText = document.getElementById('camera-status-text');
                        const cameraDetailStatus = document.getElementById('camera-detail-status');
                        
                        if (status.streaming) {
                            cameraStatus.className = 'status-indicator status-online';
                            cameraStatusText.textContent = 'Online';
                            cameraDetailStatus.textContent = 'Streaming';
                        } else if (status.initialized) {
                            cameraStatus.className = 'status-indicator status-warning';
                            cameraStatusText.textContent = 'Ready';
                            cameraDetailStatus.textContent = 'Initialized';
                        } else {
                            cameraStatus.className = 'status-indicator status-offline';
                            cameraStatusText.textContent = 'Offline';
                            cameraDetailStatus.textContent = 'Not initialized';
                        }
                        
                        // Update camera information
                        if (status.config) {
                            const config = status.config;
                            if (config.resolution) {
                                document.getElementById('camera-resolution').textContent = 
                                    `${config.resolution[0]}x${config.resolution[1]}`;
                            }
                            if (config.framerate) {
                                document.getElementById('camera-fps').textContent = 
                                    `${config.framerate} FPS`;
                            }
                        }
                        
                        if (status.camera_handler && status.camera_handler.camera_properties) {
                            const props = status.camera_handler.camera_properties;
                            if (props.Model) {
                                document.getElementById('camera-model').textContent = props.Model;
                            }
                        }
                }
            })
            .catch(error => {
                    console.error('Error fetching camera status:', error);
            });
        }

        // Update status on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateSystemStatus();
            
            // Update status every 5 seconds
            setInterval(updateSystemStatus, 5000);
        });
    </script>
</body>
</html>